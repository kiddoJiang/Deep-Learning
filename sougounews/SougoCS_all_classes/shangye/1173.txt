当２００２年哈尔ｂ瓦里安（Ｈａｌ　Ｖａｒｉａｎ）到谷歌（Ｇｏｏｇｌｅ）担任兼职经济顾问时，他问时任首席执行官的埃里克ｂ施密特（Ｅｒｉｃ　Ｓｃｈｍｉｄｔ）他能发挥什么作用。施密特建议瓦里安可以“看看”谷歌销售广告的方式，因为“它或许能让我们赚点小钱”。这种说法可就太保守了：２０１１年谷歌的广告收入超过３６０亿美元。尽管瓦里安在其中有很大的功劳——他撰写的教材可是我的微观经济学圣经，不过谷歌广告的成功基石在他到来之前就奠定了。传统广告业是通过销售人员为广告报价来销售。而谷歌决定把广告空间拿来拍卖。当现在已经成为谷歌首席经济学家的瓦里安“审视”谷歌计算机科学家们设计的拍卖机制时，他发现设计得相当完美。如果你用谷歌搜索，谷歌的一组计算机尝试输出可能的最佳搜索结果；另一组计算机则进行拍卖运算，目的是在搜索结果旁边投放最有效的广告，按重要程度不同共有１１处广告位置。用户每搜索一次，拍卖就运行一次——每天多达数十亿次。除了海量的计算请求之外，这些拍卖运行起来相当棘手的原因有二。首先，这些广告位置可以相互替代。如果我销售飞往冰岛首都雷克雅未克的航班机票，而你在谷歌搜索“飞冰岛机票”，那么我会想要一个广告位置。我可能不需要全部位置，而且这样做也会激怒用户，从长远来看对谁都没好处（可能谷歌的竞争对手雅虎（Ｙａｈｏｏ）和微软（Ｍｉｃｒｏｓｏｆｔ）除外）。谷歌不想一视同仁地出售广告位，因为广告主担心会赢得多个冗余位置。解决方法是一种称为“广义二阶价格拍卖（ｇｅｎｅｒａｌｉｓｅｄ　ｓｅｃｏｎｄ　ｐｒｉｃｅ　ａｕｃｔｉｏｎ）”的算法：头名中标者获得第一广告位，支付第二名竞标者的报价；第二名中标者获得第二广告位，支付第三名竞标者的报价。（这么说有些过于简化，后面会看到。）谷歌愿意接受比每位中标者实际报价低的价格看上去或许很奇怪，但这会鼓励竞标者报出较高的价格，从而很可能提高谷歌的总体收入。第二个问题是用什么作为竞标的实际衡量标准。谷歌可以按照“展示”为单位收费，即一则广告每展示一次就收一次费用；或者以“点击”为单位收费，即用户每点击一次广告跳转到广告主的网站就收一次费。这里的困难在于，谷歌的成本（如放弃向其他人出售广告位的机会）是按照“展示”次数计算的，而广告主最关心的是点击率。我在谷歌输入“毕加索作品”，谷歌既向我提供关于购买招贴画的搜索结果，也提供关于佳士得（Ｃｈｒｉｓｔｉｅ＇ｓ）拍卖会的结果。我敢肯定，佳士得的点击率会小得多，但它愿意为每次点击支付更高的价格。谷歌的解决方案是根据预期点击率创造一套“质量”标准，在展示和点击之间起到“汇率”转换的作用。如果佳士得愿意为每次点击支付１０００美元，而谷歌预期它将获得１次点击，那么，只要谷歌预期Ａｒｔ．ｃｏ．ｕｋ的点击次数会超过１万次，Ａｒｔ．ｃｏ．ｕｋ就可以凭每次点击１０美分的报价胜出——理应如此，因为谷歌预期从Ａｒｔ．ｃｏ．ｕｋ将获得更高的收入。Ａｒｔ．ｃｏ．ｕｋ支付的广告费将取决于佳士得的报价和二者广告的“质量”。这套方法非常绝妙，但很简单，执行得也很好。令我最吃惊的是，谷歌的很多搜索结果是“低价出售的”，少数广告主得以支付底价广告费，有的搜索甚至完全没有广告。在谷歌输入“Ｈａｌ　Ｖａｒｉａｎ　Ｇｏｏｇｌｅ　ａｄ　ａｕｃｔｉｏｎｓ”，你看不到任何广告。如果输入“ｆｌｏｗｅｒｓ”，我敢向你保证，全部１１个广告位都会被填满。谷歌赚到的３６０亿美元靠的正是这类搜索。